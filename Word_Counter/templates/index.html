<!doctype html>
<html lang="en" data-theme="light">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Word Counter</title>
        <link rel="stylesheet" href="/static/style.css">
    </head>
    <body>
        <div class="card">
            <header class="header">
                <h1>ðŸ“„ Word Counter (A â†’ Z)</h1>
                <button id="themeBtn" class="theme-btn" aria-label="Toggle theme">ðŸŒ™</button>
            </header>
            <form
                action="/upload"
                method="post"
                enctype="multipart/form-data"
                class="uploader"
            >
                <input type="file" name="file" accept=".txt">
                <button type="submit">Analyze</button>
            </form>
            {% if error %}
            <p class="err">{{ error }}</p>
            {% endif %}

    {% if results %}
            <h3>Results{% if filename %} â€” {{ filename }}{% endif %}</h3>
            <div class="table-wrap">
                <table>
                    <thead>
                        <tr>
                            <th>Word</th>
                            <th>Count</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for w, n in results.items() %}
                        <tr>
                            <td>{{ w }}</td>
                            <td>{{ n }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <p class="hint">Upload a .txt file to see word counts.</p>
            {% endif %}
        </div>
        <script>
    const btn = document.getElementById("themeBtn");
    function setTheme(theme) {
      document.documentElement.setAttribute("data-theme", theme);
      localStorage.setItem("wc-theme", theme);
      btn.textContent = theme === "dark" ? "â˜€ï¸" : "ðŸŒ™";
    }
    const saved = localStorage.getItem("wc-theme");
    if (saved) setTheme(saved);
    else if (window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches) setTheme("dark");
    btn.addEventListener("click", () => {
      const cur = document.documentElement.getAttribute("data-theme") || "light";
      setTheme(cur === "light" ? "dark" : "light");
    });
        </script>
    </body>
</html>
